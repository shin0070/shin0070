<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>백설공주 카드 게임</title>
<style>
body {
  font-family: "Noto Sans KR", sans-serif;
  background-color: #fff0f5;
  margin: 0;
  padding: 20px;
  text-align: center;
}
h1 { margin-bottom: 10px; }
#score { font-weight: bold; margin-bottom: 10px; }
#cards {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  flex-wrap: wrap;
}
.card {
  width: 180px;
  height: 120px;
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px;
  font-size: 14px;
  text-align: center;
}
.card.correct {
  border: 3px solid #4CAF50;
  transform: scale(1.05);
}
.card.wrong {
  border: 3px solid #f44336;
  animation: shake 0.3s;
}
@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-5px); }
  100% { transform: translateX(0); }
}
#message {
  margin-top: 15px;
  font-weight: bold;
  min-height: 24px;
}
#selected-cards {
  margin-top: 20px;
  padding: 10px;
  background-color: #ffe4e1;
  border-radius: 12px;
  min-height: 50px;
}
.selected-card {
  display: inline-block;
  background-color: #fff;
  border: 2px solid #ccc;
  border-radius: 8px;
  padding: 5px 8px;
  margin: 3px;
  font-size: 12px;
}
#restartBtn {
  margin-top: 15px;
  padding: 12px 20px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background-color: #ff69b4;
  color: white;
  display: none;
}
</style>
</head>
<body>

<h1>👑 백설공주 카드 게임</h1>
<div id="score">⭐ 0</div>
<div id="cards"></div>
<p id="message"></p>
<div id="selected-cards"></div>
<button id="restartBtn" onclick="restartGame()">🔄 다시 시작</button>

<script>
const storyCards = [
  "백설공주는 아름다운 공주였어요.",
  "사악한 왕비가 질투했어요.",
  "왕비는 백설공주를 숲으로 보내었어요.",
  "백설공주는 작은 집에서 일곱 난쟁이를 만났어요.",
  "난쟁이들과 행복하게 살았어요.",
  "왕비가 독 사과를 주었어요.",
  "백설공주는 잠들었어요.",
  "왕자님이 키스로 백설공주를 깨웠어요.",
  "백설공주와 왕자님은 행복하게 살았어요."
];

let currentIndex = 0;
let score = 0;

const scoreDiv = document.getElementById("score");
const cardsDiv = document.getElementById("cards");
const messageP = document.getElementById("message");
const selectedDiv = document.getElementById("selected-cards");
const restartBtn = document.getElementById("restartBtn");

function shuffle(array){ return array.sort(()=> Math.random()-0.5); }

function showCards(){
  cardsDiv.innerHTML = "";
  messageP.textContent = "";

  const correctCard = storyCards[currentIndex];
  let wrongCards = storyCards.filter((c,i)=> i!==currentIndex);
  wrongCards = shuffle(wrongCards).slice(0,2);
  const choices = shuffle([correctCard,...wrongCards]);

  choices.forEach(c=>{
    const card = document.createElement("div");
    card.classList.add("card");
    card.textContent = c;
    card.onclick = () => selectCard(c, card);
    cardsDiv.appendChild(card);
  });
}

function selectCard(c, cardDiv){
  const correctCard = storyCards[currentIndex];
  if(c === correctCard){
    cardDiv.classList.add("correct");
    score++;
    scoreDiv.textContent = `⭐ ${score}`;
    messageP.textContent = "🎉 정답!";

    // 선택 카드 순서 표시
    const selected = document.createElement("span");
    selected.classList.add("selected-card");
    selected.textContent = c;
    selectedDiv.appendChild(selected);

    currentIndex++;
    if(currentIndex === storyCards.length){
      cardsDiv.innerHTML = "";
      messageP.textContent = `🏆 이야기를 모두 완성했어요! 총 별 ⭐ ${score}개`;
      restartBtn.style.display = "inline-block";
    } else {
      setTimeout(showCards, 500);
    }
  } else {
    cardDiv.classList.add("wrong");
    messageP.textContent = "❌ 틀렸어요. 다시 골라보세요!";
  }
}

function restartGame(){
  currentIndex=0;
  score=0;
  scoreDiv.textContent="⭐ 0";
  messageP.textContent="";
  selectedDiv.innerHTML = "";
  restartBtn.style.display="none";
  showCards();
}

showCards();
</script>

</body>
</html>
